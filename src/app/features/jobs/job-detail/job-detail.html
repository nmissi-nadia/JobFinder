<div class="job-detail-container">
  <button routerLink="/jobs" class="back-button">Retour aux offres</button>

  @if (error()) {
  <div class="error-message">{{ error() }}</div>
  }

  @if (isLoading()) {
  <div class="loading">Chargement...</div>
  } @else if (job(); as currentJob) {
  <div class="job-detail-card">
    <div class="job-header">
      <div class="badges">
        @if (isFavorite()) {
        <span class="badge badge-favorite">Dans vos favoris</span>
        }
        @if (isTracked()) {
        <span class="badge badge-tracked">Candidature suivie</span>
        }
      </div>
      <h1>{{ currentJob.title }}</h1>
      <p class="company">{{ currentJob.company }}</p>
      <p class="location">{{ currentJob.location }}</p>
      @if (currentJob.salary) {
      <p class="salary">{{ currentJob.salary }}</p>
      }
      <p class="date-posted">Publi√© le {{ currentJob.datePosted | date:'longDate' }}</p>
    </div>

    <div class="job-description">
      <h2>Description du poste</h2>
      <div [innerHTML]="currentJob.description"></div>
    </div>

    <div class="job-actions">
      @if (!isTracked()) {
      <button (click)="applyToJob()" class="btn-apply">Postuler maintenant</button>
      }
      <button (click)="toggleFavorite()" class="btn-favorite" [class.active]="isFavorite()" title="Ajouter aux favoris">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <polygon
            points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
          </polygon>
        </svg>
      </button>
    </div>
  </div>
  }
</div>